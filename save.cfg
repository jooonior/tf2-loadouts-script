// If no information in the save file assume loadout A
l1=A; l2=A; l3=A; l4=A; l5=A; l6=A; l7=A; l8=A; l9=A

// Load old save
exec saved_loadouts.txt

// Set log path to the save file
con_logfile cfg/saved_loadouts.txt

// Realias loadout aliases so they control which loadouts can be saved insted
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l1=B; alias save_loadoutC echo l1=C; alias save_loadoutD echo l1=D"
alias loadout=B "alias save_loadoutA echo l1=A; alias save_loadoutB          ; alias save_loadoutC echo l1=C; alias save_loadoutD echo l1=D"
alias loadout=C "alias save_loadoutA echo l1=A; alias save_loadoutB echo l1=B; alias save_loadoutC          ; alias save_loadoutD echo l1=D"
alias loadout=D "alias save_loadoutA echo l1=A; alias save_loadoutB echo l1=B; alias save_loadoutC echo l1=C; alias save_loadoutD          "
// Execing saved_loadouts.txt aliased this to one of ^
loadout_scout
// Save the loadout, unless it's the same as the old one (in which case save_loadoutX will be empty)
save_loadout_scout
// Repeat for all other classes

alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l2=B; alias save_loadoutC echo l2=C; alias save_loadoutD echo l2=D"
alias loadout=B "alias save_loadoutA echo l2=A; alias save_loadoutB          ; alias save_loadoutC echo l2=C; alias save_loadoutD echo l2=D"
alias loadout=C "alias save_loadoutA echo l2=A; alias save_loadoutB echo l2=B; alias save_loadoutC          ; alias save_loadoutD echo l2=D"
alias loadout=D "alias save_loadoutA echo l2=A; alias save_loadoutB echo l2=B; alias save_loadoutC echo l1=C; alias save_loadoutD          "
loadout_soldier
save_loadout_soldier
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l3=B; alias save_loadoutC echo l3=C; alias save_loadoutD echo l3=D"
alias loadout=B "alias save_loadoutA echo l3=A; alias save_loadoutB          ; alias save_loadoutC echo l3=C; alias save_loadoutD echo l3=D"
alias loadout=C "alias save_loadoutA echo l3=A; alias save_loadoutB echo l3=B; alias save_loadoutC          ; alias save_loadoutD echo l3=D"
alias loadout=D "alias save_loadoutA echo l3=A; alias save_loadoutB echo l3=B; alias save_loadoutC echo l3=C; alias save_loadoutD          "
loadout_pyro
save_loadout_pyro
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l4=B; alias save_loadoutC echo l4=C; alias save_loadoutD echo l4=D"
alias loadout=B "alias save_loadoutA echo l4=A; alias save_loadoutB          ; alias save_loadoutC echo l4=C; alias save_loadoutD echo l4=D"
alias loadout=C "alias save_loadoutA echo l4=A; alias save_loadoutB echo l4=B; alias save_loadoutC          ; alias save_loadoutD echo l4=D"
alias loadout=D "alias save_loadoutA echo l4=A; alias save_loadoutB echo l4=B; alias save_loadoutC echo l4=C; alias save_loadoutD          "
loadout_demoman
save_loadout_demoman
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l5=B; alias save_loadoutC echo l5=C; alias save_loadoutD echo l5=D"
alias loadout=B "alias save_loadoutA echo l5=A; alias save_loadoutB          ; alias save_loadoutC echo l5=C; alias save_loadoutD echo l5=D"
alias loadout=C "alias save_loadoutA echo l5=A; alias save_loadoutB echo l5=B; alias save_loadoutC          ; alias save_loadoutD echo l5=D"
alias loadout=D "alias save_loadoutA echo l5=A; alias save_loadoutB echo l5=B; alias save_loadoutC echo l5=C; alias save_loadoutD          "
loadout_heavy
save_loadout_heavy
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l6=B; alias save_loadoutC echo l6=C; alias save_loadoutD echo l6=D"
alias loadout=B "alias save_loadoutA echo l6=A; alias save_loadoutB          ; alias save_loadoutC echo l6=C; alias save_loadoutD echo l6=D"
alias loadout=C "alias save_loadoutA echo l6=A; alias save_loadoutB echo l6=B; alias save_loadoutC          ; alias save_loadoutD echo l6=D"
alias loadout=D "alias save_loadoutA echo l6=A; alias save_loadoutB echo l6=B; alias save_loadoutC echo l6=C; alias save_loadoutD          "
loadout_engineer
save_loadout_engineer
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l7=B; alias save_loadoutC echo l7=C; alias save_loadoutD echo l7=D"
alias loadout=B "alias save_loadoutA echo l7=A; alias save_loadoutB          ; alias save_loadoutC echo l7=C; alias save_loadoutD echo l7=D"
alias loadout=C "alias save_loadoutA echo l7=A; alias save_loadoutB echo l7=B; alias save_loadoutC          ; alias save_loadoutD echo l7=D"
alias loadout=D "alias save_loadoutA echo l7=A; alias save_loadoutB echo l7=B; alias save_loadoutC echo l7=C; alias save_loadoutD          "
loadout_medic
save_loadout_medic
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l8=B; alias save_loadoutC echo l8=C; alias save_loadoutD echo l8=D"
alias loadout=B "alias save_loadoutA echo l8=A; alias save_loadoutB          ; alias save_loadoutC echo l8=C; alias save_loadoutD echo l8=D"
alias loadout=C "alias save_loadoutA echo l8=A; alias save_loadoutB echo l8=B; alias save_loadoutC          ; alias save_loadoutD echo l8=D"
alias loadout=D "alias save_loadoutA echo l8=A; alias save_loadoutB echo l8=B; alias save_loadoutC echo l8=C; alias save_loadoutD          "
loadout_sniper
save_loadout_sniper
alias loadout=A "alias save_loadoutA          ; alias save_loadoutB echo l9=B; alias save_loadoutC echo l9=C; alias save_loadoutD echo l9=D"
alias loadout=B "alias save_loadoutA echo l9=A; alias save_loadoutB          ; alias save_loadoutC echo l9=C; alias save_loadoutD echo l9=D"
alias loadout=C "alias save_loadoutA echo l9=A; alias save_loadoutB echo l9=B; alias save_loadoutC          ; alias save_loadoutD echo l9=D"
alias loadout=D "alias save_loadoutA echo l9=A; alias save_loadoutB echo l9=B; alias save_loadoutC echo l9=C; alias save_loadoutD          "
loadout_spy
save_loadout_spy

// Done saving, disable logging
con_logfile ""

// Revert loadout aliases back to original state
alias loadout=A "alias resup load_itempreset 0; loadoutA_class; loadoutA_cfg"
alias loadout=B "alias resup load_itempreset 1; loadoutB_class; loadoutB_cfg"
alias loadout=C "alias resup load_itempreset 2; loadoutC_class; loadoutC_cfg"
alias loadout=D "alias resup load_itempreset 3; loadoutD_class; loadoutD_cfg"

// Console message
echo Loadouts have been saved.
